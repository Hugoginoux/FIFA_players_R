# Data 

## Sources

The dataset is under the form of 1 csv per year and per gender. We want to load everything, and merge them into a single dataframe.

```{r merging_female}
fem_16 = read.csv('data/female_players_16.csv')
fem_16$release_year = '2016'

fem_17 = read.csv('data/female_players_17.csv')
fem_17$release_year = '2017'

fem_18 = read.csv('data/female_players_18.csv')
fem_18$release_year = '2018'

fem_19 = read.csv('data/female_players_19.csv')
fem_19$release_year = '2019'

fem_20 = read.csv('data/female_players_20.csv')
fem_20$release_year = '2020'

fem_21 = read.csv('data/female_players_21.csv')
fem_21$release_year = '2021'

fem_22 = read.csv('data/female_players_22.csv')
fem_22$release_year = '2022'

female_players = rbind(fem_16, fem_17, fem_18, fem_19, fem_20, fem_21, fem_22)
```


```{r merging_male}
male_15 = read.csv('data/players_15.csv')
male_15$release_year = '2015'

male_16 = read.csv('data/players_16.csv')
male_16$release_year = '2016'

male_17 = read.csv('data/players_17.csv')
male_17$release_year = '2017'

male_18 = read.csv('data/players_18.csv')
male_18$release_year = '2018'

male_19 = read.csv('data/players_19.csv')
male_19$release_year = '2019'

male_20 = read.csv('data/players_20.csv')
male_20$release_year = '2020'

male_21 = read.csv('data/players_21.csv')
male_21$release_year = '2021'

male_22 = read.csv('data/players_22.csv')
male_22$release_year = '2022'

male_players = rbind(male_15, male_16, male_17, male_18, male_19, male_20, male_21, male_22)

```

```{r merging both}
female_players$gender = 'F'
male_players$gender = 'M'

all_players = rbind(female_players, male_players)

head(all_players)
```

## Cleaning (from ls to gk, turn into numeric)

Some quantitative features are encoded under the form '55+3' for instance. We should therefore treat these values by keeping only the 2 first characters and turning them into integers.

```{r cleaning}
defaultW <- getOption("warn")
options(warn = -1)


clean_col=function(dataset, col){
  column = dataset[, col]
  
  str_to_num = function(x){
    return(as.numeric(substr(x, 1, 2)))
  }
  
  return(sapply(column, FUN = str_to_num))
}


for (col in c("ls","st","rs","lw","lf","cf","rf","rw","lam","cam","ram","lm","lcm","cm","rcm","rm","lwb","ldm","cdm","rdm","rwb","lb","lcb","cb","rcb","rb","gk")){
    #print(col)
    all_players[,col]=clean_col(all_players, col)
    male_players[,col]=clean_col(male_players, col)
    female_players[,col]=clean_col(female_players, col)
    male_22[,col]=clean_col(male_22, col)
    fem_22[,col]=clean_col(fem_22, col)
}


```

## Missing value analysis

